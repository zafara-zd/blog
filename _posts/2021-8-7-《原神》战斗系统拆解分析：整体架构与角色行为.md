---
layout: post
title: 《原神》战斗系统拆解：整体架构与角色行为
date: 2021-8-7
Author: Zafara
tags: [游戏设计分析]
comments: true
toc: true

---

 

《原神》作为手机平台为主的开放世界冒险游戏，战斗系统相对于3A游戏较轻量化，但对于传统手游则具备极高的复杂度和相应的深度。本文旨在以策划的角度，尝试拆分设计以理解《原神》的战斗系统设计。

## 一. 战斗系统整体架构

战斗力由3大块组成：养成、搭配和操作。养成需要玩家投入资源和花费时间，以提高角色的数值能力。搭配需要玩家基于角色理解，选择合适圣遗物套装、武器、及队伍成员。操作需要玩家的实际行为水平，最大化发挥队伍潜力。玩家需要基于环境和敌人调整搭配和操作，更详细的内容会在下面进行探讨。

![image-20210807232132849](https://pic.imgdb.cn/item/610ea56e5132923bf80651a6.jpg)

图1 《原神》整体系统层面的战斗力模型

对于详细的一场战斗，可参考下图并将一场战斗分为3个模块进行分析：角色、环境、敌人。

角色即玩家控制的队伍，通过培养的数值、战斗的行为、合理配队和战斗资源的规划以达成最佳的战斗最终结果，通常来说即在避免死亡的前提下造成充分输出。

环境分为两种：被动（抽象）和主动（具象）。被动指代充斥在战斗空间中，玩家无法以任何方式避免的额外规则。包括但不限于雪山区域的寒冷、深渊的整层特殊规则效果等等。主动指代环境内具备实体的元素，无论是否可直接交互。包括地形、设施、可交互物等等。

敌人即具备血量或击败条件的，通常会主动阻碍玩家达成胜利目标的实体。游戏中设计了多种敌人，并在不同场合下对它们的数值进行调整。例如在不同区域出现时的等级浮动，以及在深渊或战斗活动中得到的数值提升。

角色、环境和敌人互相影响，理论上，当这3者对玩家都充分重要时，游戏才能提供更高的深度和潜在的乐趣。角色，作为《原神》的核心，固然是提供深度的主要内容。但光有角色，敌人枯燥无味的话，只会让玩家感觉自己在打各种样子的木桩。因此，本文将重点放在角色上，对角色的战斗设计进行详细拆解分析。

在敌人层面上，需要以专门一篇文章探讨原神的敌人设计，包括小怪、精英和boss。因此本文不进行详细探讨。此外鉴于不同类型的敌人若想做出充分的差异，设计成本较高。因此环境在提供多样化体验上便承担重要的责任。例如在8月份的深渊12层中，能量潮汐的设计就使得玩家在战斗中需要充分考虑通过小技能获取能量的时机。



![image-20210807211902405](https://pic.imgdb.cn/item/610ea5d95132923bf806e799.jpg)

图2 《原神》的战斗模型



## 二. 角色

战斗的本质，是在自己死亡前击败对方，对于《原神》亦不例外。

但《原神》作为一款PVE游戏，且具有闪避无敌帧的设定，使得传统战斗公式【战斗力=扛伤能力*输出能力】并不完全适用。扛伤能力的重要度被大幅度拉低，相反，输出能力的意义则被大幅度抬高。直接导致在养成角色时，除非特定能依靠扛伤能力提升输出能力的角色，绝大多数角色在养成时玩家都仅仅需要关注如何尽可能提高输出值。

对比其他玩家操作比重较低的游戏，《原神》的玩家操作上限将大幅度提高战斗力。使得原神的战斗力可以被抽象为【角色强度*控制强度】。当然，这个抽象公式的参考意义远大于实际去计算，毕竟没法量化玩家的强度，而且自己也不能证明这两个参数是乘方关系。

对于角色强度，由两部分组成：玩家可培养数值和额外调整数值。前者是通用的，玩家可通过游戏内培养提升的数值，关于此内容会专门写一篇文章，本文仅列出最终呈现的核心属性的分类。后者则基于关卡环境和食物效果以提供。

对于控制强度，由玩家的战斗行为为基础，通过产生行为结果以得到控制强度。本文首先对玩家的战斗行为进行拆解分析，其次对行为产生的结果进行抽象化分析。

此外，玩家在战斗中还需要对战斗资源进行资源管理。即能量、体力、血量等等。对于战斗资源，角色强度会影响其[获取]，控制则影响其有效[输出]。

### 1. 战斗资源

资源，定义为可计量的、本身无直接用处的、可通过消耗转化成战斗效果的抽象物。

对于《原神》，战斗资源包括：血量、能量、体力。

|      | 上限           | 战斗中回复方式                                               | 战斗中消耗方式                                             | 数值影响                        |
| ---- | -------------- | ------------------------------------------------------------ | ---------------------------------------------------------- | ------------------------------- |
| 血量 | 角色培养       | 1. 吃食物（部分场景禁止）                                    | 血量属于被动消耗：即提高玩家的容错，而非主动获得特定效果。 | 减伤                            |
| 能量 | 角色决定       | 1. 普通攻击（随机提供） 2. 释放技能（不同角色不一样） 3. 敌人被打到特定血线（不同敌人不一样） | 释放大招                                                   | 充能效率                        |
| 体力 | 地图探索完成度 | 1. 吃食物（部分场景禁止）2. 自动回复                         | 1. 闪避-奔跑 2. 重击                                       | 体力消耗降低/减免、恢复速率增加 |

表1 战斗资源列表

上表仅以最标准通用的情况对战斗资源进行分析。对于特定角色和能力，可基于这些战斗资源进行深度设计。例如当前已有魈：血量越高，容错率相对越高（尽管百分比掉血，差的不多），或者胡桃：血量低于50%伤害提高。或者从2.0的稻妻开始，对能量也开始添加更丰富的运用方法。

### 2. 角色强度

前文提到，角色强度由玩家可培养数值和额外调整数值构成。对于额外调整数值，主要由部分活动的特效和食物效果等构成，这里不进行详细探讨。对于玩家可培养数值，本文对详细属性进行基于战斗目的的分类。

![image-20210807211902405](https://pic.imgdb.cn/item/610e9e4d5132923bf8fb67a8.png)

图3 《原神》玩家战斗可培养数值

作为备注的是，角色等级在战斗中具有影响的是3点：

1. 敌人防御 **防御对象承伤=((人物等级+100)/((1-防御减免效果)\*(怪物等级+100)+人物等级+100)**
2. 元素反应的直伤类反应
3. 等级压制的韧性影响

在极其苛刻情况下，存在等级压制带来的受击伤害降低及造成伤害提高。（[**小**明明明中观察](https://bbs.nga.cn/nuke.php?func=ucp&uid=62508878)：https://bbs.nga.cn/read.php?tid=24358389）

条件1：双方等级差≥70.
条件2：低等级一方的等级不超过10

就目前来说，除非刻意整活，不然正常玩家绝不会遇到该情况。因此可视为该系统为废弃系统，当前配置仅作为无用配置存在系统之中。

因此整体来说，等级对战斗的用处远小于等级对于培养的意义。

### 3. 控制强度

前文提到，行为强度的基础是玩家行为，然后由玩家行为产生行为后果，继而抽象化为控制强度。

![image-20210807211902405](https://pic.imgdb.cn/item/610e8d355132923bf8e1bcd0.png)

图4 《原神》玩家战斗行为拆解分析

具体内容由上图所示。绿色线为可改变行为方式，红色线为高级操作（取消后摇、滑步弓、登龙剑），蓝色线为能量相关，紫色线为体力相关。

由于能量获取存在延迟，不同技能获取能量的方式不一，且在场角色获得能量更多的种种特性，使得能量获取本身需要玩家通过操作以达到最大收益，提高操作的潜在深度上限。

元素回复机制：

 	1. 前后台状态（队伍人数影响比例）：4人-后台获取0.6
 	2. 能量球类型：微粒1、晶球3
 	3. 属性匹配：对应属性小：无属性：对应属性大=1：2：3

由于普通攻击具备多段特征，普通攻击、重击、技能、大招等具备打断后摇以提升DPS效果，使得单角色存在DPS最高输出手法。不过在实际战斗环境下，未必能使用出来，但追求最高的DPS手法为游戏带来不少行为层面的深度。

在位移可以取消后摇的基础下，加深了位移的深度。位移操作现在具备多种功能：

1. 避免伤害 
2. 战略走位 
3. 取消后摇->提升输出。

3种位移方式，闪避优先级最高且具有无敌帧，但消耗体力。移动是最为标准的位移方式。跳跃由于导致玩家在浮空状态而无法执行任何指令，因此除非跳跃的收益大于不执行，否则很少运用。

总结来说，从行为层面具备以下提供深度的操作项

	1. 通过取消后摇，执行更流畅连贯的攻击，提高DPS
	2. 能量管理，尤其是判定谁来获取技能产出的能量球及敌人掉落的能量球并平衡切人时可能造成的伤害损失
	3. 体力管理，需要基于实际战斗情况进行调控
	4. 通过位移方式避免伤害以维持续航，避免被打断以维持输出
	5. 基于敌人分布和场地环境，可通过位移来到更具战略价值的位置：聚怪、引开机制、引入机制等
	6. 切换角色，在合适场合下切换到合适角色以取消后摇、技能连携、吃球等等
	7. 高端操作，如滑步弓和登龙剑。

其中，切换角色是高出其他操作一个层级的提供深度的操作行为。因为需要：监控其他角色的血量、状态、能量、小技能CD和大技能CD以发挥切换角色后的全部潜力。如今配队，成体系的配队会格外注重输出循环，即类似MMORPG的操作理念，在一个操作循环中最大化输出。但通常理论意义较大，毕竟输出循环很容易收到战斗中环境和敌人的影响，并且每个战斗都用一套输出循环也会消除一切深度。对于日常刷资源和高练打低的情况下，玩家确实需要简单无脑的清怪方式。但如果游戏只有这种战斗体验，会严重降低战斗的乐趣及深度上限。玩家能在合适环境下，快速思考策略和解决方案应该是更好的战斗体验。**所以小技能提示CD呀コラッ！**
对于高端操作，由于绝大多数玩家都用不来，只要保证不会极度影响角色强度应该就行。事实是，在登龙剑刚火遍全网时，制作组表示进行密切观察。而之后随着配队体系的重视，以及如今后期玩家基本不会通过单角色1带3的方式进行战斗，因此这种需要极高门槛且仅对单角色操作提高上限的高级操作已经基本被大多数遗忘，或新玩家干脆不知道。尤其就目前来说，尽管理论上很多操作各种角色都可以执行，但登龙剑也只有卢老爷最合适且确实有效提高伤害上限。

![image-20210807211902405](https://pic.imgdb.cn/item/610ea22e5132923bf8018657.png)

图5 《原神》玩家战斗行为结果

这里探讨的战斗行为仅针对单一角色，切换角色执行行动只是将同一时间或短时间内执行的行动种类提升并且之间产生交互，但并不会影响本处的讨论。这里只是简单列举，实际在分析时，发现最后快成了列出可调参数段，那样的话真就没完没了而且也逐渐失去分析意义。

对于这张图，行为的对象也很有价值，并非所有技能直接对受击对象或自身产生效果，也有产生召唤物或造物等技能以丰富技能的设计空间。各种元素反应的效果，也可以被抽象到对应的战斗行为之中。

![image-20210807220043894](https://pic.imgdb.cn/item/610e920f5132923bf8e91d1e.jpg)

图6 《原神》的元素反应

作为核心机制的元素反应，对比《塞尔达传说：荒野之息》，更紧密结合在战斗之中。或者说，元素反应是以提高战斗深度和乐趣而存在，而非单纯像《荒野之息》中提高沉浸感和丰富战斗环境效果。

对于元素附着系统，已有一系列专家玩家进行分析，并总结出基本准确的模型。

## 三. 补充

对于环境，无论哪种类型都需要具体情况具体分析，且游戏也在不断推出新的环境效果。相对于涉及大量美术资源和工程的敌人，通过环境改变体验成本低出不少。

对于敌人，之后会写专门文章进行设计拆解和分析。

